<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="Expects data input same as the output from get_gated_dat with indicator columns of specific
naming convention (see below)."><title>Calculate the percentage of positive cells for specific subpopulations — getPerc • staRgate</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.11/clipboard.min.js" integrity="sha512-7O5pXpc0oCRrxk8RUfDYFgn0nO1t+jLuIOQdOMRp4APB7uZ4vSjspzp5y6YDtDs4VzUSTbWzBFZ/LKJhnyFOKw==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Calculate the percentage of positive cells for specific subpopulations — getPerc"><meta property="og:description" content="Expects data input same as the output from get_gated_dat with indicator columns of specific
naming convention (see below)."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-dark navbar-expand-lg bg-primary" data-bs-theme="dark"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">staRgate</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.0.9000</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/vignette_run_pipeline.html">Tutorial: Running the pipeline</a>
  </div>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"></ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Calculate the percentage of positive cells for specific subpopulations</h1>
      
      <div class="d-none name"><code>getPerc.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Expects data input same as the output from <code>get_gated_dat</code> with indicator columns of specific
naming convention (see below).</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">getPerc</span><span class="op">(</span></span>
<span>  <span class="va">intens_dat</span>,</span>
<span>  <span class="va">num_marker</span>,</span>
<span>  <span class="va">denom_marker</span>,</span>
<span>  expand_num <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  expand_denom <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  keep_indicators <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>intens_dat</dt>
<dd><p>dataframe of gated data with indicator columns per marker of interest
(specify in <code>num_marker</code> and <code>denom_marker</code>)
with naming convention <code>marker_pos</code> per marker with
values of 0 to indicate negative-, 1 to indicate positive-expressing</p></dd>


<dt>num_marker</dt>
<dd><p>string for the marker(s) to specify the numerator for subpopulations of interest
See <code>expand_num</code> argument and examples for how to specify</p></dd>


<dt>denom_marker</dt>
<dd><p>string for the marker(s) to specify the denominator for subpopulations of interest
See <code>expand_denom</code> argument and examples for how to specify.</p></dd>


<dt>expand_num</dt>
<dd><p>logical, only accepts <code>TRUE</code> or <code>FALSE</code> with default of <code>FALSE</code>
if <code>expand_num = TRUE</code>, currently only considers up to pairs of markers
specified in <code>num_marker</code> in the numerator of subpopulation calculations
(e.g., CD4+ &amp; CD8- of CD3+)
if <code>expand_num = FALSE</code>, only considers each marker specified in <code>num_marker</code>
individually in the numerator of subpopulation calculations
(e.g., CD4+ of CD3+)</p></dd>


<dt>expand_denom</dt>
<dd><p>logical, only accepts <code>TRUE</code> or <code>FALSE</code> with default of <code>FALSE</code>
if <code>expand_denom = TRUE</code>, currently considers up to 1 marker from the <code>num_marker</code> and
the unique combinations of <code>denom_marker</code> to generate list of subpopulations
e.g., if <code>denom_marker = c("CD8")</code>, <code>num_marker = c("LAG3", "KI67")</code>, and <code>expand_denom = TRUE</code>,
the subpopulations will include:
1. LAG3+ of CD8+, LAG3- of CD8+, LAG3+ of CD8-, LAG3- of CD8-,
2. KI67+ of CD8+, KI67- of CD8+, KI67+ of CD8-, KI67- of CD8-,
3. KI67+ of (LAG3+ &amp; CD8+), KI67- of (LAG3+ &amp; CD8+), KI67+ of (LAG3+ &amp; CD8-), KI67- of (LAG3+ &amp; CD8-)...etc.,
4. LAG3+ of (KI67+ &amp; CD8+), LAG3- of (KI67+ &amp; CD8+), LAG3+ of (KI67+ &amp; CD8-), LAG3- of (KI67+ &amp; CD8-)...etc.,
if <code>expand_denom = FALSE</code>, only generates the list of subpopulations based on
unique combinations of the <code>denom_marker</code>
(e.g., <code>denom_marker = c("CD4")</code> and <code>expand_denom = FALSE</code> only considers subpopulations with
denominator CD4+ and CD4- whereas
<code>denom_marker = c("CD4", "CD8"</code> and <code>expand_denom = FALSE</code> will consider subpopulations with denominators
(CD4- &amp; CD8-), (CD4+ &amp; CD8-), (CD4- &amp; CD8+) and (CD4+ &amp; CD8+))</p></dd>


<dt>keep_indicators</dt>
<dd><p>logical, only accepts <code>TRUE</code> or <code>FALSE</code> with default of <code>TRUE</code>
if <code>keep_indicators = TRUE</code>, will return indicator columns of 0/1 to specify which markers are considered in the
numerator and denominators of the subpopulations. Naming convention for the numerator cols are <code>&lt;marker&gt;_POS</code>
and for denominator cols are <code>&lt;marker&gt;_POS_D</code>. For both sets of columns, <code>0</code> indicates considered the negative cells,
<code>1</code> indicates considered the positive cells and <code>NA_real_</code> indicates not in consideration for the subpopulation.
This is useful for matching to percentage data
with potentially different naming conventions to avoid not having exact string matches for the same
subpopulation
take note that the order also matters when matching strings: "CD4+ &amp; CD8- of CD3+" is different from "CD8- &amp; CD4+ of CD3+"</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    

<p>tibble containing the percentage of cells where
rows correspond to each subpopulation specified in the <code>subpopulation</code>,
<code>n_num</code> indicates the number of cells that satisifies the numerator conditions,
<code>n_denom</code> indicates the number of cells that satisifies the denominator conditions,
<code>perc</code> = <code>n_num</code> divided by <code>n_denom</code> unless <code>n_denom</code> = 0, then <code>perc = NA_real_</code></p>


    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>The subpopulations are defined as (num marker(s)) out of (denom marker(s)) where
num denotes numerator, and denom denotes denominator
(these shorthands are used in the function arguments)</p>
    </div>

  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Jasme Lee.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.9.</p>
</div>

    </footer></div>

  

  

  </body></html>

